{%- if pillar.get('external', {}).network_device is defined %}
plugin:
  collectd_network_device:
    plugin: snmp
    data:
      std_traffic:
        type: if_octets
        table: true
        instance: 1.3.6.1.2.1.31.1.1.1.1
        values:
        - 1.3.6.1.2.1.31.1.1.1.6
        - 1.3.6.1.2.1.31.1.1.1.10
      std_rate:
        type: if_packets
        table: true
        instance: 1.3.6.1.2.1.31.1.1.1.1
        values:
        - 1.3.6.1.2.1.31.1.1.1.7
        - 1.3.6.1.2.1.31.1.1.1.11
    host: {{ pillar.external.network_device }}
{%- else %}
plugin: {}
{%- endif %}